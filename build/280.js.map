{"version":3,"sources":["../../src/validators/ExistsVaildator.ts","../../src/pages/line-add-edit-modal/line-add-edit-modal.ts","../../src/pages/line-add-edit-modal/line-add-edit-modal.module.ts"],"names":[],"mappings":";;;;;;AAGA;AAAA;IAAA;IA0CA,CAAC;IAzCQ,qCAAqB,GAAG,UAC7B,KAAc;QAGd,MAAM,CAAC,UAAC,CAAkB;YAExB,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACZ,EAAE,EAAC,KAAK,CAAC,CACT,CAAC;oBACD,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,WAAC,IAAI,QAAC,KAAK,CAAC,CAAC,KAAK,EAAb,CAAa,CAAC,IAAE,CAAC;wBAC3C,CAAC,CAAC;4BACE,qBAAqB,EAAE,IAAI;yBAC5B;wBACH,CAAC,CAAC,IAAI,CAAC;gBACT,CAAC;gBACD,IAAI;oBACF,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAAC,IAAI;gBAAC,MAAM,CAAC,IAAI,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC,CAAC;IACK,4BAAY,GAAG,UACpB,YAAmB;QAGnB,MAAM,CAAC,UAAC,CAAkB;YAExB,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACZ,IAAI,UAAU,GAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;gBAChD,EAAE,EAAC,UAAU,GAAC,EAAE,CAAC,CACjB,CAAC;oBACD,MAAM,CAAC,UAAU,KAAK,CAAC,CAAC,KAAK;wBAC3B,CAAC,CAAC;4BACA,YAAY,EAAE,IAAI;yBACjB;wBACH,CAAC,CAAC,IAAI,CAAC;gBACT,CAAC;gBACD,IAAI;oBACF,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAAC,IAAI;gBAAC,MAAM,CAAC,IAAI,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC,CAAC;IACJ,sBAAC;CAAA;AA1C2B;;;;;;;;;;;;;;;;;;;;;;;;;;ACHwC;AAC1B;AAC+B;AACU;AAClB;AACE;AACS;AACT;AACnE;;;;;GAKG;AAOH;IAoCE,8BAAmB,OAAsB,EAChC,SAAoB,EACpB,YAAkC,EAClC,WAA8B,EAC7B,MAAuB,EACxB,QAAwB,EACxB,SAA0B,EAC1B,WAAuB;QAPb,YAAO,GAAP,OAAO,CAAe;QAChC,cAAS,GAAT,SAAS,CAAW;QACpB,iBAAY,GAAZ,YAAY,CAAsB;QAClC,gBAAW,GAAX,WAAW,CAAmB;QAC7B,WAAM,GAAN,MAAM,CAAiB;QACxB,aAAQ,GAAR,QAAQ,CAAgB;QACxB,cAAS,GAAT,SAAS,CAAiB;QAC1B,gBAAW,GAAX,WAAW,CAAY;QAvChC,UAAK,GAAQ,SAAS,CAAC;QAMvB,SAAI,GAAW,ujHAyBb,CAAC;QASC,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,GAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QAC1C,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7C,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;QAChE,CAAC;QAED,IAAI,CAAC,IAAI,GAAG,IAAI,6FAAiB,EAAE,CAAC;QACpC,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QAC9D,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;QACpD,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;QACxD,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;QACxD,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAClD,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;QAClE,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACnC,cAAc,EAAC,IAAI,mEAAW,CAAC,EAAE,EAAC,oFAAe,CAAC,qBAAqB,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAClG,GAAG,EAAE,CAAC,EAAE,CAAC;SACZ,CAAC,CAAC;QACD,EAAE,EAAC,IAAI,CAAC,IAAI,IAAE,MAAM,CAAC;YACnB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QACvB,IAAI;YACJ,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IAEzB,CAAC;IAGD,yCAAU,GAAV,UAAW,WAAkB;QAA7B,iBAqBC;QApBC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,KAAI,CAAC,YAAY,CAAC,eAAe,CAC/B,WAAW,CACZ,CAAC,SAAS,CACT,cAAI;gBACF,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;oBAC7B,KAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAC3C,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;oBAC3B,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;gBAC/B,CAAC;YACH,CAAC,EACD,aAAG;gBACD,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;gBAC7B,KAAI,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,GAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACtD,CAAC,CACF,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6CAAc,GAAd;QACE,IAAI,CAAC,UAAU,GAAC,MAAM,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,WAAW,GAAC,MAAM,CAAC,WAAW;QACnC,MAAM,CAAC,IAAI,CAAC,gCAAgC,EAAC,QAAQ,EAAE,QAAQ,GAAC,IAAI,CAAC,UAAU,GAAC,UAAU,GAAC,IAAI,CAAC,WAAW,GAAC,sGAAsG,CAAC,CAAC;IAEtN,CAAC;IACD,kDAAmB,GAAnB;QAEE,IAAI,CAAC,UAAU,GAAC,MAAM,CAAC,UAAU,CAAC;QAClC,IAAI,CAAC,WAAW,GAAC,MAAM,CAAC,WAAW;QACnC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAC,QAAQ,EAAE,QAAQ,GAAC,IAAI,CAAC,UAAU,GAAC,UAAU,GAAC,IAAI,CAAC,WAAW,GAAC,sGAAsG,CAAC,CAAC;QAC1N,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IACD,mCAAI,GAAJ;QAAA,iBAMC;QALC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;QAE3B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACjC,KAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,KAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,mCAAI,GAAJ;QAEE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IACD,oCAAK,GAAL;QACE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IACD,6CAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;IACrD,CAAC;IA/HU,oBAAoB;QAJhC,gEAAS,CAAC;YACT,QAAQ,EAAE,0BAA0B;WACG;SACxC,CAAC;6EAqCyC;YACrB,oGAAS;YACN,yEAAoB;YACrB,mFAAiB;YACrB,sEAAe;YACd,sEAAc;YACb,qEAAe;YACd,WAAW;OA3CrB,oBAAoB,CAiIhC;IAAD,CAAC;AAAA;SAjIY,oBAAoB,kB;;;;;;;;;;;;;;;;;;;ACpBQ;AACO;AACa;AAU7D;IAAA;IAAyC,CAAC;IAA7B,0BAA0B;QARtC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,kFAAoB;aACrB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,kFAAoB,CAAC;aAC/C;SACF,CAAC;OACW,0BAA0B,CAAG;IAAD,iCAAC;CAAA;AAAH","file":"280.js","sourcesContent":["import {  ValidatorFn, AbstractControl } from \"@angular/forms\";\n\n\nexport class ExistsVaildator {\n  static validateConnIDFactory = (\n    lists:string[]\n  ): ValidatorFn => {\n\n    return (c: AbstractControl) => {\n\n      if (c.value) {\n        if(lists)\n        {\n        return lists.findIndex(p => p === c.value)>=0\n          ? {\n              validateConnIDFactory: true\n            }\n          : null;\n        }\n        else\n          return null;\n      } else return null;\n    };\n  };\n  static EquieFactory = (\n    compare_name:string\n  ): ValidatorFn => {\n\n    return (c: AbstractControl) => {\n\n      if (c.value) {\n        var compare_to=c.parent.get(compare_name).value;\n        if(compare_to>\"\")\n        {\n        return compare_to !== c.value\n          ? {\n            EquieFactory: true\n            }\n          : null;\n        }\n        else\n          return null;\n      } else return null;\n    };\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/validators/ExistsVaildator.ts","import { FormGroup, FormControl,FormBuilder } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { ConnServicesProvider } from '../../providers/conn-services/conn-services';\nimport { GlobalComponent } from \"../../components/global/global\";\nimport { ModalController, LoadingController } from \"ionic-angular\";\nimport { ConnHttpViewModel } from '../../Model/ViewModel/ConnHttpViewModel';\nimport { ExistsVaildator } from '../../validators/ExistsVaildator';\n/**\n * Generated class for the LineAddEditModalPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-line-add-edit-modal',\n  templateUrl: 'line-add-edit-modal.html',\n})\nexport class LineAddEditModalPage {\n  item: any;\n  mode: string;\n  line_url:string;\n  title:string=\"Token申請\";\n  innerWidth: number;\n  innerHeight: number;\n  id_list:any;\n  remote_conn_id_list:any;\n  myForm:FormGroup;\n  help: string = `\n  本系統採用line原廠提供的Line Notify(參考https://notify-bot.line.me/zh_TW/),\n 只要與LINE Notify連動，LINE用戶就能輕鬆地接收來自其他服務的通知，\n  首先你必須先新增一個Token標籤，用來儲存Line原廠提供的Token，\n  取得Token方法有兩種，一種是取得發行存取權杖後複製權杖後貼上上傳到本系統，另一方式是\n  使用Line自動將Token提供本系統自動儲存。所以當你按下新增(十)時，輸入Line標籤後，\n  有兩個按鈕可以選擇。\n\n  <<手動到Line Notify網站手動複製取得發行存取權杖後取代{token}>>\n\n  系統會開啟Line Notify網站，若沒有登入過，Line會要求你輸入Line帳號登入，\n  (本系統不會取得你的Line帳號)，Line Notify會幫你自動產生一個Line Notify群組\n  並發送訊息給你，當登入後在自己的姓名點選個人頁面，按下最下方有一個發行權杖按鈕後，\n  輸入權杖名稱(最好與本系統的Token標籤一樣)，這時候，你同時可以選擇未來要透過本系統發送給你的Line群組，\n  當你按下發行時，Line將產生的權杖，請按下複製並貼上到發行存取權杖欄位取代{token}\n  例如：Bearer 94rNOTozTHknR1dbtZ7qa\n\n  <<自動到Line Notify取得發行存取權杖儲存資料庫內>>\n\n  系統會開啟Line Notify網站，若沒有登入過，Line會要求你輸入Line帳號登入，\n  (本系統不會取得你的Line帳號)，Line Notify會幫你自動產生一個Line Notify群組\n  並發送訊息給你，當登入後可以選擇未來要透過本系統發送給你的Line群組，\n  當你按下同意連動時，本系統會從Line Notify取得Token並儲存在本系統資料庫內，\n   同時會透過Line寄發Token給你，這時候你會在網頁上收到成功訊息，將網頁關閉即可，\n   然後回到新增畫面按下重新查詢就可以看到新增的Token標籤，未來再透過寄發訊息設定進行寄發訊息即可\n   `;\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public ConnServices: ConnServicesProvider,\n    public loadingCtrl: LoadingController,\n    private global: GlobalComponent,\n    public viewCtrl: ViewController,\n    public modalCtrl: ModalController,\n    public formBuilder:FormBuilder) {\n      this.remote_conn_id_list = [];\n      this.mode = navParams.data.mode;\n      this.id_list=navParams.data.id_list.Model;\n      for (let i = 0; i < this.id_list.length; i++) {\n        this.remote_conn_id_list.push(this.id_list[i].remote_conn_id);\n      }\n\n      this.item = new ConnHttpViewModel();\n      this.item.remote_conn_id = navParams.data.item.remote_conn_id;\n      this.item.user_name = navParams.data.item.user_name;\n      this.item.conn_string = navParams.data.item.conn_string;\n      this.item.pwd = navParams.data.item.pwd;\n      this.item.creator = navParams.data.item.creator;\n      this.item.create_time = navParams.data.item.create_time;\n      this.item.modifier = navParams.data.item.modifier;\n      this.item.last_update_time = navParams.data.item.last_update_time;\n      this.item.conn_type_key = navParams.data.item.conn_type_key;\n      this.item.conn_type = navParams.data.item.conn_type;\n      this.myForm = this.formBuilder.group({\n        remote_conn_id:new FormControl('',ExistsVaildator.validateConnIDFactory(this.remote_conn_id_list)),\n        pwd: [''],\n    });\n      if(this.mode==\"POST\")\n        this.GetLineUrl(\"I\");\n      else\n      this.GetLineUrl(\"U\");\n\n  }\n\n\n  GetLineUrl(data_action:string ) {\n    this.global.createLoader(\"讀取資料中...\");\n    this.global.loading.present().then(() => {\n      this.ConnServices.GetLineUrlAsync(\n        data_action\n      ).subscribe(\n        data => {\n          if (data.DidError === true) {\n            this.global.dismissLoading();\n            this.global.showError(data.ErrorMessage);\n          } else {\n            this.line_url = data.Model;\n            this.global.dismissLoading();\n          }\n        },\n        err => {\n          this.global.dismissLoading();\n          this.global.showError(\"無法連上WebAPI伺服器-\"+err.message);\n        }\n      );\n    });\n  }\n\n  OpenLineNotify() {\n    this.innerWidth=window.innerWidth;\n    this.innerHeight=window.innerHeight\n    window.open(\"https://notify-bot.line.me/my/\",\"_blank\", \"width=\"+this.innerWidth+\",height=\"+this.innerHeight+\",toolbar=no,top=0,left=0,status=no,scrollbars=yes,resizable=no,menubar=no,location=no,directories=no\");\n\n  }\n  OpenLineNotifyOAuth() {\n\n    this.innerWidth=window.innerWidth;\n    this.innerHeight=window.innerHeight\n    window.open(this.line_url+this.item.remote_conn_id,\"_blank\", \"width=\"+this.innerWidth+\",height=\"+this.innerHeight+\",toolbar=no,top=0,left=0,status=no,scrollbars=yes,resizable=no,menubar=no,location=no,directories=no\");\n    this.viewCtrl.dismiss();\n  }\n  Help() {\n    this.global.createLoader();\n\n    this.global.loading.present().then(() => {\n      this.global.showMessage(\"說明\", this.help);\n    });\n  }\n\n  Save() {\n\n    this.viewCtrl.dismiss(this.item);\n  }\n  close() {\n    this.viewCtrl.dismiss();\n  }\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LineAddEditModalPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/line-add-edit-modal/line-add-edit-modal.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LineAddEditModalPage } from './line-add-edit-modal';\n\n@NgModule({\n  declarations: [\n    LineAddEditModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LineAddEditModalPage),\n  ],\n})\nexport class LineAddEditModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/line-add-edit-modal/line-add-edit-modal.module.ts"],"sourceRoot":""}