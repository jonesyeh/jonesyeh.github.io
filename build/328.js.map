{"version":3,"sources":["../../src/pages/login/login.ts","../../src/pages/login/login.module.ts"],"names":[],"mappings":"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","file":"328.js","sourcesContent":["import { MyApp } from \"../../app/app.component\";\nimport { ApiUrlServicesProvider } from \"../../providers/api-url-services/api-url-services\";\nimport { Component } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  MenuController\n} from \"ionic-angular\";\nimport { AuthServicesProvider } from \"../../providers/auth-services/auth-services\";\nimport { GlobalComponent } from \"../../components/global/global\";\nimport { ApiUrlViewModel } from \"../../Model/ViewModel/ApiUrlViewModel\";\nimport { MyAppSharedSettings } from \"../../Model/MyAppSharedSettings\";\n// import { String } from \"../../Model/String\";\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: \"page-login\",\n  templateUrl: \"login.html\"\n})\nexport class LoginPage {\n  data_list: ApiUrlViewModel[];\n  default_api_url: ApiUrlViewModel;\n  registerCredentials = { userName: \"\", password: \"\" };\n  menu_id:string;\n  constructor(\n    public menuCtrl: MenuController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private authServices: AuthServicesProvider,\n    private global: GlobalComponent,\n    private ApiUrlServices: ApiUrlServicesProvider,\n    public conf: MyAppSharedSettings,\n    public myApp: MyApp\n  ) {\n    this.data_list = [];\n    this.default_api_url = null;\n    this.LoadData(true);\n  }\n  onChangeObj(newObj) {\n    console.log(newObj);\n    this.default_api_url = newObj;\n    this.default_api_url.is_default = true;\n    this.ApiUrlServices.PostPutAsync(this.default_api_url, \"PUT\");\n    this.conf.API_URL = this.default_api_url.url;\n    this.conf.is_url_forward = this.default_api_url.is_url_forward;\n    this.conf.api_name=this.default_api_url.disp_name;\n  }\n\n  ionViewDidLoad() {\n    console.log(\"ionViewDidLoad LoginPage\");\n  }\n  public createAccount() {\n    this.navCtrl.push(\"RegisterPage\");\n  }\n\n  public openNavApiUrlPage() {\n    this.navCtrl.setRoot(\"ApiUrlPage\", {\n      parent_page: this,\n      parent_page_name: \"LoginPage\"\n    });\n  }\n\n  LoadData(init: boolean) {\n    this.global.createLoader();\n    this.global.loading.present().then(() => {\n      this.ApiUrlServices.GetListsAsync(\"\", true).subscribe(\n        data => {\n          if (data.DidError === true) {\n            this.global.dismissLoading();\n            this.global.showError(data.ErrorMessage);\n          } else {\n            if (init) {\n              this.data_list = [];\n              this.data_list = data.Model;\n              let index = this.data_list.findIndex(d => d.is_default === true);\n              this.default_api_url = this.data_list[index];\n              this.conf.API_URL = this.default_api_url.url;\n              this.conf.is_url_forward = this.default_api_url.is_url_forward;\n              this.conf.api_name=this.default_api_url.disp_name;\n            } else\n              for (let i = 0; i < data.Model.length; i++) {\n                this.data_list.push(data.Model[i]);\n              }\n            this.global.dismissLoading();\n          }\n        },\n        err => {\n          this.global.dismissLoading();\n          this.global.showError(\"無法連上WebAPI伺服器-\"+err.message);\n        }\n      );\n    });\n  }\n  public login() {\n    console.log(\"login\");\n    this.conf.login_count+=1;\n    this.global.createLoader();\n    this.global.loading.present().then(() => {\n      this.authServices.loginAsync(this.registerCredentials).subscribe(\n        data => {\n          this.global.dismissLoading();\n          if (data.DidError === false) {\n            //認證成功\n\n\n            this.myApp.SetMenu(data.Model.MenuViewModel);\n            this.navCtrl.setRoot(\"HomePage\");\n            // this.menu_id=String.Format(\"{0}_{1}\",\"menu1\",this.conf.login_count);\n            // this.menuCtrl.enable(true, this.menu_id);\n\n          } else {\n            this.global.showError(data.ErrorMessage);\n          }\n        },\n        err => {\n          this.global.dismissLoading();         \n          this.global.showError(\"無法連上WebAPI伺服器-\"+err.message);\n        }\n      );\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts"],"sourceRoot":""}